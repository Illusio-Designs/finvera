/**
 * Seeder: Account Groups
 * Seeds the master database with standard account groups
 */

const { v4: uuidv4 } = require('uuid');

module.exports = {
  up: async (queryInterface, Sequelize) => {
    const now = new Date();

    const accountGroups = [
      // ASSETS
      {
        id: uuidv4(),
        name: 'Current Assets',
        parent_id: null,
        nature: 'asset',
        group_code: 'CA',
        bs_category: 'current_asset',
        affects_pl: false,
        is_tax_group: false,
        is_system: true,
        description: 'Assets that can be converted to cash within one year',
        createdAt: now,
        updatedAt: now,
      },
      {
        id: uuidv4(),
        name: 'Cash-in-Hand',
        parent_id: null,
        nature: 'asset',
        group_code: 'CASH',
        bs_category: 'current_asset',
        affects_pl: false,
        is_tax_group: false,
        is_system: true,
        description: 'Physical cash available',
        createdAt: now,
        updatedAt: now,
      },
      {
        id: uuidv4(),
        name: 'Bank Accounts',
        parent_id: null,
        nature: 'asset',
        group_code: 'BANK',
        bs_category: 'current_asset',
        affects_pl: false,
        is_tax_group: false,
        is_system: true,
        description: 'Bank account balances',
        createdAt: now,
        updatedAt: now,
      },
      {
        id: uuidv4(),
        name: 'Sundry Debtors',
        parent_id: null,
        nature: 'asset',
        group_code: 'SD',
        bs_category: 'current_asset',
        affects_pl: false,
        is_tax_group: false,
        is_system: true,
        description: 'Accounts receivable from customers',
        createdAt: now,
        updatedAt: now,
      },
      {
        id: uuidv4(),
        name: 'Stock-in-Hand',
        parent_id: null,
        nature: 'asset',
        group_code: 'INV',
        bs_category: 'current_asset',
        affects_pl: false,
        is_tax_group: false,
        is_system: true,
        description: 'Inventory and stock',
        createdAt: now,
        updatedAt: now,
      },
      {
        id: uuidv4(),
        name: 'Loans & Advances (Asset)',
        parent_id: null,
        nature: 'asset',
        group_code: 'LA',
        bs_category: 'current_asset',
        affects_pl: false,
        is_tax_group: false,
        is_system: true,
        description: 'Loans given and advances paid',
        createdAt: now,
        updatedAt: now,
      },
      {
        id: uuidv4(),
        name: 'Fixed Assets',
        parent_id: null,
        nature: 'asset',
        group_code: 'FA',
        bs_category: 'fixed_asset',
        affects_pl: false,
        is_tax_group: false,
        is_system: true,
        description: 'Long-term tangible assets',
        createdAt: now,
        updatedAt: now,
      },

      // LIABILITIES
      {
        id: uuidv4(),
        name: 'Current Liabilities',
        parent_id: null,
        nature: 'liability',
        group_code: 'CL',
        bs_category: 'current_liability',
        affects_pl: false,
        is_tax_group: false,
        is_system: true,
        description: 'Obligations due within one year',
        createdAt: now,
        updatedAt: now,
      },
      {
        id: uuidv4(),
        name: 'Sundry Creditors',
        parent_id: null,
        nature: 'liability',
        group_code: 'SC',
        bs_category: 'current_liability',
        affects_pl: false,
        is_tax_group: false,
        is_system: true,
        description: 'Accounts payable to suppliers',
        createdAt: now,
        updatedAt: now,
      },
      {
        id: uuidv4(),
        name: 'Duties & Taxes',
        parent_id: null,
        nature: 'liability',
        group_code: 'DT',
        bs_category: 'tax_control',
        affects_pl: false,
        is_tax_group: true,
        is_system: true,
        description: 'GST, TDS, and other tax liabilities',
        createdAt: now,
        updatedAt: now,
      },
      {
        id: uuidv4(),
        name: 'Loans (Liability)',
        parent_id: null,
        nature: 'liability',
        group_code: 'LOAN',
        bs_category: 'noncurrent_liability',
        affects_pl: false,
        is_tax_group: false,
        is_system: true,
        description: 'Loans and borrowings',
        createdAt: now,
        updatedAt: now,
      },

      // EQUITY
      {
        id: uuidv4(),
        name: 'Capital Account',
        parent_id: null,
        nature: 'equity',
        group_code: 'CAP',
        bs_category: 'equity',
        affects_pl: false,
        is_tax_group: false,
        is_system: true,
        description: 'Owner\'s capital and equity',
        createdAt: now,
        updatedAt: now,
      },
      {
        id: uuidv4(),
        name: 'Reserves & Surplus',
        parent_id: null,
        nature: 'equity',
        group_code: 'RES',
        bs_category: 'equity',
        affects_pl: false,
        is_tax_group: false,
        is_system: true,
        description: 'Retained earnings and reserves',
        createdAt: now,
        updatedAt: now,
      },

      // INCOME (P&L)
      {
        id: uuidv4(),
        name: 'Sales Accounts',
        parent_id: null,
        nature: 'income',
        group_code: 'SAL',
        bs_category: null,
        affects_pl: true,
        is_tax_group: false,
        is_system: true,
        description: 'Revenue from sales',
        createdAt: now,
        updatedAt: now,
      },
      {
        id: uuidv4(),
        name: 'Direct Income',
        parent_id: null,
        nature: 'income',
        group_code: 'DIR_INC',
        bs_category: null,
        affects_pl: true,
        is_tax_group: false,
        is_system: true,
        description: 'Income directly related to business operations',
        createdAt: now,
        updatedAt: now,
      },
      {
        id: uuidv4(),
        name: 'Indirect Income',
        parent_id: null,
        nature: 'income',
        group_code: 'IND_INC',
        bs_category: null,
        affects_pl: true,
        is_tax_group: false,
        is_system: true,
        description: 'Other income not from core operations',
        createdAt: now,
        updatedAt: now,
      },

      // EXPENSES (P&L)
      {
        id: uuidv4(),
        name: 'Purchase Accounts',
        parent_id: null,
        nature: 'expense',
        group_code: 'PUR',
        bs_category: null,
        affects_pl: true,
        is_tax_group: false,
        is_system: true,
        description: 'Cost of goods purchased',
        createdAt: now,
        updatedAt: now,
      },
      {
        id: uuidv4(),
        name: 'Direct Expenses',
        parent_id: null,
        nature: 'expense',
        group_code: 'DIR_EXP',
        bs_category: null,
        affects_pl: true,
        is_tax_group: false,
        is_system: true,
        description: 'Expenses directly related to production',
        createdAt: now,
        updatedAt: now,
      },
      {
        id: uuidv4(),
        name: 'Indirect Expenses',
        parent_id: null,
        nature: 'expense',
        group_code: 'IND_EXP',
        bs_category: null,
        affects_pl: true,
        is_tax_group: false,
        is_system: true,
        description: 'Operating and administrative expenses',
        createdAt: now,
        updatedAt: now,
      },
    ];

    await queryInterface.bulkInsert('account_groups', accountGroups);
  },

  down: async (queryInterface, Sequelize) => {
    await queryInterface.bulkDelete('account_groups', null, {});
  },
};
