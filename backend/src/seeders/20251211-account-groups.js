'use strict';

module.exports = {
  async up(queryInterface, Sequelize) {
    const now = new Date();

    // Get all existing tenants
    const tenants = await queryInterface.sequelize.query('SELECT id FROM tenants', {
      type: Sequelize.QueryTypes.SELECT,
    });

    if (tenants.length === 0) {
      console.log('No tenants found. Account groups will be seeded when tenants are created.');
      return;
    }

    // Define all account groups with their hierarchy (parent_code instead of parent_id)
    const accountGroupsData = [
      // 1. ASSETS
      { code: '1', name: 'ASSETS', parentCode: null, type: 'Assets', category: 'Assets' },
      {
        code: '1.1',
        name: 'Non-Current Assets',
        parentCode: '1',
        type: 'Assets',
        category: 'Non-Current Assets',
      },
      {
        code: '1.1.1',
        name: 'Fixed Assets',
        parentCode: '1.1',
        type: 'Assets',
        category: 'Fixed Assets',
      },
      {
        code: '1.1.1.1',
        name: 'Tangible Assets',
        parentCode: '1.1.1',
        type: 'Assets',
        category: 'Tangible Assets',
      },
      {
        code: '1.1.1.1.1',
        name: 'Land & Building',
        parentCode: '1.1.1.1',
        type: 'Assets',
        category: 'Tangible Assets',
      },
      {
        code: '1.1.1.1.2',
        name: 'Plant & Machinery',
        parentCode: '1.1.1.1',
        type: 'Assets',
        category: 'Tangible Assets',
      },
      {
        code: '1.1.1.1.3',
        name: 'Furniture & Fixtures',
        parentCode: '1.1.1.1',
        type: 'Assets',
        category: 'Tangible Assets',
      },
      {
        code: '1.1.1.1.4',
        name: 'Vehicles',
        parentCode: '1.1.1.1',
        type: 'Assets',
        category: 'Tangible Assets',
      },
      {
        code: '1.1.1.1.5',
        name: 'Office Equipment',
        parentCode: '1.1.1.1',
        type: 'Assets',
        category: 'Tangible Assets',
      },
      {
        code: '1.1.1.2',
        name: 'Intangible Assets',
        parentCode: '1.1.1',
        type: 'Assets',
        category: 'Intangible Assets',
      },
      {
        code: '1.1.1.2.1',
        name: 'Goodwill',
        parentCode: '1.1.1.2',
        type: 'Assets',
        category: 'Intangible Assets',
      },
      {
        code: '1.1.1.2.2',
        name: 'Computer Software',
        parentCode: '1.1.1.2',
        type: 'Assets',
        category: 'Intangible Assets',
      },
      {
        code: '1.1.1.2.3',
        name: 'Patents & Trademarks',
        parentCode: '1.1.1.2',
        type: 'Assets',
        category: 'Intangible Assets',
      },
      {
        code: '1.1.1.2.4',
        name: 'Brand Value',
        parentCode: '1.1.1.2',
        type: 'Assets',
        category: 'Intangible Assets',
      },
      {
        code: '1.1.2',
        name: 'Non-Current Investments',
        parentCode: '1.1',
        type: 'Assets',
        category: 'Non-Current Investments',
      },
      {
        code: '1.1.2.1',
        name: 'Investment in Shares',
        parentCode: '1.1.2',
        type: 'Assets',
        category: 'Non-Current Investments',
      },
      {
        code: '1.1.2.2',
        name: 'Investment in Debentures',
        parentCode: '1.1.2',
        type: 'Assets',
        category: 'Non-Current Investments',
      },
      {
        code: '1.1.2.3',
        name: 'Investment in Mutual Funds',
        parentCode: '1.1.2',
        type: 'Assets',
        category: 'Non-Current Investments',
      },
      {
        code: '1.1.3',
        name: 'Deferred Tax Assets',
        parentCode: '1.1',
        type: 'Assets',
        category: 'Deferred Tax Assets',
      },
      {
        code: '1.1.4',
        name: 'Long-term Loans & Advances',
        parentCode: '1.1',
        type: 'Assets',
        category: 'Long-term Loans & Advances',
      },
      {
        code: '1.2',
        name: 'Current Assets',
        parentCode: '1',
        type: 'Assets',
        category: 'Current Assets',
      },
      {
        code: '1.2.1',
        name: 'Inventories',
        parentCode: '1.2',
        type: 'Assets',
        category: 'Inventories',
      },
      {
        code: '1.2.1.1',
        name: 'Raw Materials',
        parentCode: '1.2.1',
        type: 'Assets',
        category: 'Inventories',
      },
      {
        code: '1.2.1.2',
        name: 'Work in Progress',
        parentCode: '1.2.1',
        type: 'Assets',
        category: 'Inventories',
      },
      {
        code: '1.2.1.3',
        name: 'Finished Goods',
        parentCode: '1.2.1',
        type: 'Assets',
        category: 'Inventories',
      },
      {
        code: '1.2.1.4',
        name: 'Stock-in-Trade',
        parentCode: '1.2.1',
        type: 'Assets',
        category: 'Inventories',
      },
      {
        code: '1.2.1.5',
        name: 'Stores & Spares',
        parentCode: '1.2.1',
        type: 'Assets',
        category: 'Inventories',
      },
      {
        code: '1.2.2',
        name: 'Trade Receivables',
        parentCode: '1.2',
        type: 'Assets',
        category: 'Trade Receivables',
      },
      {
        code: '1.2.2.1',
        name: 'Sundry Debtors (Indian)',
        parentCode: '1.2.2',
        type: 'Assets',
        category: 'Trade Receivables',
      },
      {
        code: '1.2.2.2',
        name: 'Sundry Debtors (Foreign)',
        parentCode: '1.2.2',
        type: 'Assets',
        category: 'Trade Receivables',
      },
      {
        code: '1.2.2.3',
        name: 'Bills Receivable',
        parentCode: '1.2.2',
        type: 'Assets',
        category: 'Trade Receivables',
      },
      {
        code: '1.2.3',
        name: 'Cash & Cash Equivalents',
        parentCode: '1.2',
        type: 'Assets',
        category: 'Cash & Cash Equivalents',
      },
      {
        code: '1.2.3.1',
        name: 'Cash in Hand',
        parentCode: '1.2.3',
        type: 'Assets',
        category: 'Cash & Cash Equivalents',
      },
      {
        code: '1.2.3.2',
        name: 'Cash at Bank',
        parentCode: '1.2.3',
        type: 'Assets',
        category: 'Cash & Cash Equivalents',
      },
      {
        code: '1.2.3.3',
        name: 'Cheques in Hand',
        parentCode: '1.2.3',
        type: 'Assets',
        category: 'Cash & Cash Equivalents',
      },
      {
        code: '1.2.3.4',
        name: 'Bank Deposits (FD)',
        parentCode: '1.2.3',
        type: 'Assets',
        category: 'Cash & Cash Equivalents',
      },
      {
        code: '1.2.4',
        name: 'Short-term Loans & Advances',
        parentCode: '1.2',
        type: 'Assets',
        category: 'Short-term Loans & Advances',
      },
      {
        code: '1.2.4.1',
        name: 'Advances to Suppliers',
        parentCode: '1.2.4',
        type: 'Assets',
        category: 'Short-term Loans & Advances',
      },
      {
        code: '1.2.4.2',
        name: 'Prepaid Expenses',
        parentCode: '1.2.4',
        type: 'Assets',
        category: 'Short-term Loans & Advances',
      },
      {
        code: '1.2.4.3',
        name: 'Security Deposits',
        parentCode: '1.2.4',
        type: 'Assets',
        category: 'Short-term Loans & Advances',
      },
      {
        code: '1.2.4.4',
        name: 'Staff Advances',
        parentCode: '1.2.4',
        type: 'Assets',
        category: 'Short-term Loans & Advances',
      },
      {
        code: '1.2.5',
        name: 'Other Current Assets',
        parentCode: '1.2',
        type: 'Assets',
        category: 'Other Current Assets',
      },
      {
        code: '1.2.5.1',
        name: 'GST Input Credit (CGST)',
        parentCode: '1.2.5',
        type: 'Assets',
        category: 'Other Current Assets',
      },
      {
        code: '1.2.5.2',
        name: 'GST Input Credit (SGST)',
        parentCode: '1.2.5',
        type: 'Assets',
        category: 'Other Current Assets',
      },
      {
        code: '1.2.5.3',
        name: 'GST Input Credit (IGST)',
        parentCode: '1.2.5',
        type: 'Assets',
        category: 'Other Current Assets',
      },
      {
        code: '1.2.5.4',
        name: 'TDS Receivable',
        parentCode: '1.2.5',
        type: 'Assets',
        category: 'Other Current Assets',
      },
      {
        code: '1.2.5.5',
        name: 'Interest Accrued',
        parentCode: '1.2.5',
        type: 'Assets',
        category: 'Other Current Assets',
      },

      // 2. LIABILITIES
      {
        code: '2',
        name: 'LIABILITIES',
        parentCode: null,
        type: 'Liabilities',
        category: 'Liabilities',
      },
      {
        code: '2.1',
        name: 'Equity & Reserves',
        parentCode: '2',
        type: 'Liabilities',
        category: 'Equity & Reserves',
      },
      {
        code: '2.1.1',
        name: 'Share Capital',
        parentCode: '2.1',
        type: 'Liabilities',
        category: 'Share Capital',
      },
      {
        code: '2.1.1.1',
        name: 'Equity Share Capital',
        parentCode: '2.1.1',
        type: 'Liabilities',
        category: 'Share Capital',
      },
      {
        code: '2.1.1.2',
        name: 'Preference Share Capital',
        parentCode: '2.1.1',
        type: 'Liabilities',
        category: 'Share Capital',
      },
      {
        code: '2.1.2',
        name: 'Reserves & Surplus',
        parentCode: '2.1',
        type: 'Liabilities',
        category: 'Reserves & Surplus',
      },
      {
        code: '2.1.2.1',
        name: 'Capital Reserve',
        parentCode: '2.1.2',
        type: 'Liabilities',
        category: 'Reserves & Surplus',
      },
      {
        code: '2.1.2.2',
        name: 'Securities Premium',
        parentCode: '2.1.2',
        type: 'Liabilities',
        category: 'Reserves & Surplus',
      },
      {
        code: '2.1.2.3',
        name: 'General Reserve',
        parentCode: '2.1.2',
        type: 'Liabilities',
        category: 'Reserves & Surplus',
      },
      {
        code: '2.1.2.4',
        name: 'Retained Earnings',
        parentCode: '2.1.2',
        type: 'Liabilities',
        category: 'Reserves & Surplus',
      },
      {
        code: '2.1.2.5',
        name: 'Profit & Loss Account',
        parentCode: '2.1.2',
        type: 'Liabilities',
        category: 'Reserves & Surplus',
      },
      {
        code: '2.1.3',
        name: 'Money Received Against Share Warrants',
        parentCode: '2.1',
        type: 'Liabilities',
        category: 'Equity & Reserves',
      },
      {
        code: '2.2',
        name: 'Non-Current Liabilities',
        parentCode: '2',
        type: 'Liabilities',
        category: 'Non-Current Liabilities',
      },
      {
        code: '2.2.1',
        name: 'Long-term Borrowings',
        parentCode: '2.2',
        type: 'Liabilities',
        category: 'Long-term Borrowings',
      },
      {
        code: '2.2.1.1',
        name: 'Term Loans from Banks',
        parentCode: '2.2.1',
        type: 'Liabilities',
        category: 'Long-term Borrowings',
      },
      {
        code: '2.2.1.2',
        name: 'Debentures',
        parentCode: '2.2.1',
        type: 'Liabilities',
        category: 'Long-term Borrowings',
      },
      {
        code: '2.2.1.3',
        name: 'Bonds Payable',
        parentCode: '2.2.1',
        type: 'Liabilities',
        category: 'Long-term Borrowings',
      },
      {
        code: '2.2.2',
        name: 'Deferred Tax Liabilities',
        parentCode: '2.2',
        type: 'Liabilities',
        category: 'Deferred Tax Liabilities',
      },
      {
        code: '2.2.3',
        name: 'Long-term Provisions',
        parentCode: '2.2',
        type: 'Liabilities',
        category: 'Long-term Provisions',
      },
      {
        code: '2.2.3.1',
        name: 'Provision for Gratuity',
        parentCode: '2.2.3',
        type: 'Liabilities',
        category: 'Long-term Provisions',
      },
      {
        code: '2.2.3.2',
        name: 'Provision for Leave Encashment',
        parentCode: '2.2.3',
        type: 'Liabilities',
        category: 'Long-term Provisions',
      },
      {
        code: '2.2.4',
        name: 'Other Long-term Liabilities',
        parentCode: '2.2',
        type: 'Liabilities',
        category: 'Other Long-term Liabilities',
      },
      {
        code: '2.3',
        name: 'Current Liabilities',
        parentCode: '2',
        type: 'Liabilities',
        category: 'Current Liabilities',
      },
      {
        code: '2.3.1',
        name: 'Short-term Borrowings',
        parentCode: '2.3',
        type: 'Liabilities',
        category: 'Short-term Borrowings',
      },
      {
        code: '2.3.1.1',
        name: 'Bank Overdraft',
        parentCode: '2.3.1',
        type: 'Liabilities',
        category: 'Short-term Borrowings',
      },
      {
        code: '2.3.1.2',
        name: 'Cash Credit',
        parentCode: '2.3.1',
        type: 'Liabilities',
        category: 'Short-term Borrowings',
      },
      {
        code: '2.3.1.3',
        name: 'Short-term Loans',
        parentCode: '2.3.1',
        type: 'Liabilities',
        category: 'Short-term Borrowings',
      },
      {
        code: '2.3.2',
        name: 'Trade Payables',
        parentCode: '2.3',
        type: 'Liabilities',
        category: 'Trade Payables',
      },
      {
        code: '2.3.2.1',
        name: 'Sundry Creditors (Indian)',
        parentCode: '2.3.2',
        type: 'Liabilities',
        category: 'Trade Payables',
      },
      {
        code: '2.3.2.2',
        name: 'Sundry Creditors (Foreign)',
        parentCode: '2.3.2',
        type: 'Liabilities',
        category: 'Trade Payables',
      },
      {
        code: '2.3.2.3',
        name: 'Bills Payable',
        parentCode: '2.3.2',
        type: 'Liabilities',
        category: 'Trade Payables',
      },
      {
        code: '2.3.3',
        name: 'Other Current Liabilities',
        parentCode: '2.3',
        type: 'Liabilities',
        category: 'Other Current Liabilities',
      },
      {
        code: '2.3.3.1',
        name: 'GST Payable (CGST)',
        parentCode: '2.3.3',
        type: 'Liabilities',
        category: 'Other Current Liabilities',
      },
      {
        code: '2.3.3.2',
        name: 'GST Payable (SGST)',
        parentCode: '2.3.3',
        type: 'Liabilities',
        category: 'Other Current Liabilities',
      },
      {
        code: '2.3.3.3',
        name: 'GST Payable (IGST)',
        parentCode: '2.3.3',
        type: 'Liabilities',
        category: 'Other Current Liabilities',
      },
      {
        code: '2.3.3.4',
        name: 'TDS Payable',
        parentCode: '2.3.3',
        type: 'Liabilities',
        category: 'Other Current Liabilities',
      },
      {
        code: '2.3.3.5',
        name: 'Professional Tax Payable',
        parentCode: '2.3.3',
        type: 'Liabilities',
        category: 'Other Current Liabilities',
      },
      {
        code: '2.3.3.6',
        name: 'ESI Payable',
        parentCode: '2.3.3',
        type: 'Liabilities',
        category: 'Other Current Liabilities',
      },
      {
        code: '2.3.3.7',
        name: 'PF Payable',
        parentCode: '2.3.3',
        type: 'Liabilities',
        category: 'Other Current Liabilities',
      },
      {
        code: '2.3.3.8',
        name: 'Advance from Customers',
        parentCode: '2.3.3',
        type: 'Liabilities',
        category: 'Other Current Liabilities',
      },
      {
        code: '2.3.3.9',
        name: 'Salary Payable',
        parentCode: '2.3.3',
        type: 'Liabilities',
        category: 'Other Current Liabilities',
      },
      {
        code: '2.3.3.10',
        name: 'Outstanding Expenses',
        parentCode: '2.3.3',
        type: 'Liabilities',
        category: 'Other Current Liabilities',
      },
      {
        code: '2.3.4',
        name: 'Short-term Provisions',
        parentCode: '2.3',
        type: 'Liabilities',
        category: 'Short-term Provisions',
      },
      {
        code: '2.3.4.1',
        name: 'Provision for Tax',
        parentCode: '2.3.4',
        type: 'Liabilities',
        category: 'Short-term Provisions',
      },
      {
        code: '2.3.4.2',
        name: 'Provision for Expenses',
        parentCode: '2.3.4',
        type: 'Liabilities',
        category: 'Short-term Provisions',
      },
      {
        code: '2.3.4.3',
        name: 'Provision for Dividends',
        parentCode: '2.3.4',
        type: 'Liabilities',
        category: 'Short-term Provisions',
      },

      // 3. INCOME
      { code: '3', name: 'INCOME', parentCode: null, type: 'Income', category: 'Income' },
      {
        code: '3.1',
        name: 'Revenue from Operations',
        parentCode: '3',
        type: 'Income',
        category: 'Revenue from Operations',
      },
      {
        code: '3.1.1',
        name: 'Sales Accounts',
        parentCode: '3.1',
        type: 'Income',
        category: 'Sales Accounts',
      },
      {
        code: '3.1.1.1',
        name: 'Sales - Local (Intrastate)',
        parentCode: '3.1.1',
        type: 'Income',
        category: 'Sales Accounts',
      },
      {
        code: '3.1.1.2',
        name: 'Sales - Interstate',
        parentCode: '3.1.1',
        type: 'Income',
        category: 'Sales Accounts',
      },
      {
        code: '3.1.1.3',
        name: 'Sales - Exports',
        parentCode: '3.1.1',
        type: 'Income',
        category: 'Sales Accounts',
      },
      {
        code: '3.1.1.4',
        name: 'Sales - SEZ',
        parentCode: '3.1.1',
        type: 'Income',
        category: 'Sales Accounts',
      },
      {
        code: '3.1.1.5',
        name: 'Sales - Deemed Export',
        parentCode: '3.1.1',
        type: 'Income',
        category: 'Sales Accounts',
      },
      {
        code: '3.1.2',
        name: 'Service Income',
        parentCode: '3.1',
        type: 'Income',
        category: 'Service Income',
      },
      {
        code: '3.1.2.1',
        name: 'Consulting Services',
        parentCode: '3.1.2',
        type: 'Income',
        category: 'Service Income',
      },
      {
        code: '3.1.2.2',
        name: 'Professional Services',
        parentCode: '3.1.2',
        type: 'Income',
        category: 'Service Income',
      },
      {
        code: '3.1.2.3',
        name: 'Maintenance Services',
        parentCode: '3.1.2',
        type: 'Income',
        category: 'Service Income',
      },
      {
        code: '3.1.3',
        name: 'Other Operating Revenue',
        parentCode: '3.1',
        type: 'Income',
        category: 'Other Operating Revenue',
      },
      {
        code: '3.1.3.1',
        name: 'Job Work Income',
        parentCode: '3.1.3',
        type: 'Income',
        category: 'Other Operating Revenue',
      },
      {
        code: '3.1.3.2',
        name: 'Scrap Sales',
        parentCode: '3.1.3',
        type: 'Income',
        category: 'Other Operating Revenue',
      },
      {
        code: '3.2',
        name: 'Other Income',
        parentCode: '3',
        type: 'Income',
        category: 'Other Income',
      },
      {
        code: '3.2.1',
        name: 'Interest Income',
        parentCode: '3.2',
        type: 'Income',
        category: 'Other Income',
      },
      {
        code: '3.2.2',
        name: 'Dividend Income',
        parentCode: '3.2',
        type: 'Income',
        category: 'Other Income',
      },
      {
        code: '3.2.3',
        name: 'Rental Income',
        parentCode: '3.2',
        type: 'Income',
        category: 'Other Income',
      },
      {
        code: '3.2.4',
        name: 'Commission Received',
        parentCode: '3.2',
        type: 'Income',
        category: 'Other Income',
      },
      {
        code: '3.2.5',
        name: 'Discount Received',
        parentCode: '3.2',
        type: 'Income',
        category: 'Other Income',
      },
      {
        code: '3.2.6',
        name: 'Profit on Sale of Assets',
        parentCode: '3.2',
        type: 'Income',
        category: 'Other Income',
      },
      {
        code: '3.2.7',
        name: 'Miscellaneous Income',
        parentCode: '3.2',
        type: 'Income',
        category: 'Other Income',
      },

      // 4. EXPENSES
      { code: '4', name: 'EXPENSES', parentCode: null, type: 'Expenses', category: 'Expenses' },
      {
        code: '4.1',
        name: 'Direct Expenses (Cost of Revenue)',
        parentCode: '4',
        type: 'Expenses',
        category: 'Direct Expenses',
      },
      {
        code: '4.1.1',
        name: 'Purchase Accounts',
        parentCode: '4.1',
        type: 'Expenses',
        category: 'Purchase Accounts',
      },
      {
        code: '4.1.1.1',
        name: 'Purchase - Local (Intrastate)',
        parentCode: '4.1.1',
        type: 'Expenses',
        category: 'Purchase Accounts',
      },
      {
        code: '4.1.1.2',
        name: 'Purchase - Interstate',
        parentCode: '4.1.1',
        type: 'Expenses',
        category: 'Purchase Accounts',
      },
      {
        code: '4.1.1.3',
        name: 'Purchase - Imports',
        parentCode: '4.1.1',
        type: 'Expenses',
        category: 'Purchase Accounts',
      },
      {
        code: '4.1.1.4',
        name: 'Purchase - SEZ',
        parentCode: '4.1.1',
        type: 'Expenses',
        category: 'Purchase Accounts',
      },
      {
        code: '4.1.2',
        name: 'Direct Material',
        parentCode: '4.1',
        type: 'Expenses',
        category: 'Direct Expenses',
      },
      {
        code: '4.1.3',
        name: 'Direct Labor',
        parentCode: '4.1',
        type: 'Expenses',
        category: 'Direct Expenses',
      },
      {
        code: '4.1.4',
        name: 'Manufacturing Expenses',
        parentCode: '4.1',
        type: 'Expenses',
        category: 'Direct Expenses',
      },
      {
        code: '4.1.4.1',
        name: 'Power & Fuel',
        parentCode: '4.1.4',
        type: 'Expenses',
        category: 'Direct Expenses',
      },
      {
        code: '4.1.4.2',
        name: 'Factory Rent',
        parentCode: '4.1.4',
        type: 'Expenses',
        category: 'Direct Expenses',
      },
      {
        code: '4.1.4.3',
        name: 'Factory Maintenance',
        parentCode: '4.1.4',
        type: 'Expenses',
        category: 'Direct Expenses',
      },
      {
        code: '4.1.5',
        name: 'Freight & Forwarding',
        parentCode: '4.1',
        type: 'Expenses',
        category: 'Direct Expenses',
      },
      {
        code: '4.2',
        name: 'Indirect Expenses',
        parentCode: '4',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.1',
        name: 'Employee Benefits',
        parentCode: '4.2',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.1.1',
        name: 'Salaries & Wages',
        parentCode: '4.2.1',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.1.2',
        name: 'Bonus',
        parentCode: '4.2.1',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.1.3',
        name: 'PF Contribution',
        parentCode: '4.2.1',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.1.4',
        name: 'ESI Contribution',
        parentCode: '4.2.1',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.1.5',
        name: 'Gratuity',
        parentCode: '4.2.1',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.1.6',
        name: 'Staff Welfare',
        parentCode: '4.2.1',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.1.7',
        name: 'Professional Tax',
        parentCode: '4.2.1',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.2',
        name: 'Administrative Expenses',
        parentCode: '4.2',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.2.1',
        name: 'Office Rent',
        parentCode: '4.2.2',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.2.2',
        name: 'Office Maintenance',
        parentCode: '4.2.2',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.2.3',
        name: 'Electricity Charges',
        parentCode: '4.2.2',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.2.4',
        name: 'Water Charges',
        parentCode: '4.2.2',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.2.5',
        name: 'Telephone & Internet',
        parentCode: '4.2.2',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.2.6',
        name: 'Printing & Stationery',
        parentCode: '4.2.2',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.2.7',
        name: 'Postage & Courier',
        parentCode: '4.2.2',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.2.8',
        name: 'Insurance',
        parentCode: '4.2.2',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.2.9',
        name: 'Legal & Professional Fees',
        parentCode: '4.2.2',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.2.10',
        name: 'Audit Fees',
        parentCode: '4.2.2',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.2.11',
        name: 'Bank Charges',
        parentCode: '4.2.2',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.2.12',
        name: 'Office Supplies',
        parentCode: '4.2.2',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.2.13',
        name: 'Miscellaneous Expenses',
        parentCode: '4.2.2',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.3',
        name: 'Selling & Distribution Expenses',
        parentCode: '4.2',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.3.1',
        name: 'Advertisement & Publicity',
        parentCode: '4.2.3',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.3.2',
        name: 'Sales Commission',
        parentCode: '4.2.3',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.3.3',
        name: 'Sales Promotion',
        parentCode: '4.2.3',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.3.4',
        name: 'Freight Outward',
        parentCode: '4.2.3',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.3.5',
        name: 'Delivery Charges',
        parentCode: '4.2.3',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.3.6',
        name: 'Packaging Expenses',
        parentCode: '4.2.3',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.3.7',
        name: 'Travelling Expenses',
        parentCode: '4.2.3',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.4',
        name: 'Financial Expenses',
        parentCode: '4.2',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.4.1',
        name: 'Interest on Loans',
        parentCode: '4.2.4',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.4.2',
        name: 'Interest on Overdraft',
        parentCode: '4.2.4',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.4.3',
        name: 'Bank Interest',
        parentCode: '4.2.4',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.4.4',
        name: 'Processing Fees',
        parentCode: '4.2.4',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.4.5',
        name: 'Late Payment Charges',
        parentCode: '4.2.4',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.5',
        name: 'Depreciation & Amortization',
        parentCode: '4.2',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.5.1',
        name: 'Depreciation on Building',
        parentCode: '4.2.5',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.5.2',
        name: 'Depreciation on Plant & Machinery',
        parentCode: '4.2.5',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.5.3',
        name: 'Depreciation on Furniture',
        parentCode: '4.2.5',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.5.4',
        name: 'Depreciation on Vehicles',
        parentCode: '4.2.5',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.5.5',
        name: 'Amortization of Intangibles',
        parentCode: '4.2.5',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.6',
        name: 'Tax Expenses',
        parentCode: '4.2',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.6.1',
        name: 'Income Tax',
        parentCode: '4.2.6',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.6.2',
        name: 'Deferred Tax',
        parentCode: '4.2.6',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
      {
        code: '4.2.6.3',
        name: 'Other Taxes',
        parentCode: '4.2.6',
        type: 'Expenses',
        category: 'Indirect Expenses',
      },
    ];

    // Sort groups by code to ensure parents are inserted before children
    accountGroupsData.sort((a, b) => {
      const aParts = a.code.split('.').map(Number);
      const bParts = b.code.split('.').map(Number);
      for (let i = 0; i < Math.max(aParts.length, bParts.length); i++) {
        const aVal = aParts[i] || 0;
        const bVal = bParts[i] || 0;
        if (aVal !== bVal) return aVal - bVal;
      }
      return 0;
    });

    // Insert account groups for each tenant
    for (const tenant of tenants) {
      const codeToIdMap = {}; // Map group codes to their inserted IDs for this tenant

      // Insert groups in order (parents before children)
      for (const groupData of accountGroupsData) {
        const parentId = groupData.parentCode ? codeToIdMap[groupData.parentCode] : null;

        await queryInterface.sequelize.query(
          `INSERT INTO account_groups (tenant_id, group_code, group_name, parent_id, group_type, schedule_iii_category, is_system, createdAt, updatedAt)
           VALUES (:tenant_id, :group_code, :group_name, :parent_id, :group_type, :schedule_iii_category, :is_system, :createdAt, :updatedAt)`,
          {
            replacements: {
              tenant_id: tenant.id,
              group_code: groupData.code,
              group_name: groupData.name,
              parent_id: parentId,
              group_type: groupData.type,
              schedule_iii_category: groupData.category,
              is_system: true,
              createdAt: now,
              updatedAt: now,
            },
            type: Sequelize.QueryTypes.INSERT,
          },
        );

        // Get the inserted ID by querying
        const [rows] = await queryInterface.sequelize.query(
          `SELECT id FROM account_groups WHERE tenant_id = :tenant_id AND group_code = :group_code`,
          {
            replacements: { tenant_id: tenant.id, group_code: groupData.code },
            type: Sequelize.QueryTypes.SELECT,
          },
        );
        const insertedId = rows[0]?.id;
        codeToIdMap[groupData.code] = insertedId;
      }
    }

    console.log(`Account groups seeded for ${tenants.length} tenant(s).`);
  },

  async down(queryInterface) {
    await queryInterface.bulkDelete('account_groups', { is_system: true }, {});
  },
};
